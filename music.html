<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="icon" type="image/png" sizes="16x16" href="create/top-icon.png">
    <title>FUZE | Music</title>
</head>

<body>
    <nav>
        <a href="#" class="logo">FUZE</a>
        <div class="login">
            <a href="login.html"><button class="signup">Get Started</button></a>
        </div>
    </nav>

    <main>
      <section class="content">
        <div class="left-content">

          <div class="artists">
            <h1>Featured Artists</h1>
            <div class="artist-container containers">
              <div class="artist">
                <a href="https://open.spotify.com/artist/0oOet2f43PA68X5RxKobEy" target="_blank">
                <img
                  src="https://upload.wikimedia.org/wikipedia/commons/b/bd/Shreya_Ghoshal_at_Filmfare_Awards_South.jpg"
                  alt="" /></a>
                <p>Shreya Ghoshal</p>
              </div>

              <div class="artist">
                <a href="https://open.spotify.com/artist/1Xyo4u8uXC1ZmMpatF05PJ" target="_blank">
                <img
                  src="https://github.com/ecemgo/mini-samples-great-tricks/assets/13468728/bf80314e-5a02-4702-bb64-eae8c113c417"
                  alt="" /></a>
                <p>The Weeknd</p>
              </div>

              <div class="artist">
                <a href="https://open.spotify.com/artist/0GF4shudTAFv8ak9eWdd4Y" target="_blank">
                <img
                  src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQlwWIx3kQ6EpaJzjVURrNuDxxluaULh70DlfGtLTws1f4P5XYq"
                  alt="" /></a>
                <p>Kishor Kumar</p>
              </div>

              <div class="artist">
                <a href="https://open.spotify.com/artist/4YRxDV8wJFPHPTeXepOstw" target="_blank">
                <img href="https://open.spotify.com/artist/4YRxDV8wJFPHPTeXepOstw"
                  src="https://i.pinimg.com/736x/e8/d0/9d/e8d09dc7491d9801c8edb409a40186c7.jpg"
                  alt="" /></a>
                <p>Arijit Singh</p>
              </div>

              <div class="artist">
                <img
                  src="https://github.com/ecemgo/mini-samples-great-tricks/assets/13468728/f23adc16-11d7-41dc-af6a-191e03a81603"
                  alt="" /></a>
                <p>Alicia Keys</p>
              </div>

              <div class="artist">
                <img
                  src="https://github.com/ecemgo/mini-samples-great-tricks/assets/13468728/f511c102-3217-4bea-bede-8be23b969bd8"
                  alt="" />
                <p>Maroon 5</p>
              </div>

              <div class="artist">
                <img
                  src="https://github.com/ecemgo/mini-samples-great-tricks/assets/13468728/9a8bd237-b525-43e6-a37c-daaac39db8ce"
                  alt="" />
                <p>Imagine Dragons</p>
              </div>

              <div class="artist">
                <img
                  src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcTpZFWekfPmInDiN1YaiEve8aj68Z9pj6q0UyYbCkxJ543L6mtP"
                  alt="" />
                <p>A R Rehman</p>
              </div>
            </div>
          </div>

          <div class="albums">
            <h1>Recommended Albums</h1>
            <div class="album-container containers">
              <div class="album">
                <div class="album-frame">
                  <img
                    src="https://github.com/ecemgo/mini-samples-great-tricks/assets/13468728/74c4f0f9-d73e-4737-83fa-ea4afe392229"
                    alt="" />
                </div>
                <div>
                  <h2>Views</h2>
                  <p>Drake</p>
                </div>
              </div>

              <div class="album">
                <div class="album-frame">
                  <img
                    src="https://github.com/ecemgo/mini-samples-great-tricks/assets/13468728/d3a0bac0-fdb4-467e-bdf5-f3f415928f24"
                    alt="" />
                </div>
                <div>
                  <h2>Speak Now</h2>
                  <p>Taylor Swift</p>
                </div>
              </div>

              <div class="album">
                <div class="album-frame">
                  <img
                    src="https://github.com/ecemgo/mini-samples-great-tricks/assets/13468728/85521a12-cc46-4b9f-a742-21ba407ebd5e"
                    alt="" />
                </div>
                <div>
                  <h2>Born to Die</h2>
                  <p>Lana Del Rey</p>
                </div>
              </div>

              <div class="album">
                <div class="album-frame">
                  <img
                    src="https://github.com/ecemgo/mini-samples-great-tricks/assets/13468728/4e7bf466-7fa5-4dad-b628-5bca12833b64"
                    alt="" />
                </div>
                <div>
                  <h2>Endless Summer Vacation</h2>
                  <p>Miley Cyrus</p>
                </div>
              </div>

              <div class="album">
                <div class="album-frame">
                  <img
                    src="https://github.com/ecemgo/mini-samples-great-tricks/assets/13468728/f01f546a-7ab7-4e90-acb9-1c1e817b676d"
                    alt="" />
                </div>
                <div>
                  <h2>The Dark Side of The Moon</h2>
                  <p>Pink Floyd</p>
                </div>
              </div>
            </div>
          </div>

          <div class="listen-history">
            <h1>Listen History</h1>
            <ul id="history-list">
              <li class="history-placeholder">Your listened songs will appear here.</li>
            </ul>
          </div>
        </div>
        <div class="right-content">
          <div class="recommended-songs">
           

          <div class="music-player">
            <div class="album-cover">
              <img src="images/album-cover.png" id="rotatingImage" alt="" />
              <span class="point"></span>
            </div>

            <h2>Redemption</h2>
            <p>Besomorph & Coopex</p>

            <audio id="song">
              <source src="Besomorph-Coopex-Redemption.mp3" type="audio/mpeg" />
            </audio>

            <input type="range" value="0" id="progress" />

            <div class="controls">
              <button class="backward">
                <i class="fa-solid fa-backward"></i>
              </button>
              <button class="play-pause-btn">
                <i class="fa-solid fa-play" id="controlIcon"></i>
              </button>
              <button class="forward">
                <i class="fa-solid fa-forward"></i>
              </button>
            </div>
            
            <div class="volume-control">
              <i class="fa-solid fa-volume-low"></i>
              <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1">
              <i class="fa-solid fa-volume-high"></i>
            </div>
          </div>
        </main>
        <footer>
          <h3>Watch, Play, Read & Explore </h3>
          <div class="right">
             <div class="links">
              <a href="#">Privacy policy</a>
              <a href="#">Jobs</a>
              <a href="#">Support</a>
              <a href="#">Contact us</a>
          </div>
          <div class="social">
              <a href="https://github.com/Akash-Kr-Verma"><i class="bx bxl-github"></i></a>
              <a href="https://www.instagram.com/_.airborne_"><i class="bx bxl-instagram"></i></a>
              <a href="https://www.linkedin.com/in/akash-kumar-verma-24793a294/"><i class="bx bxl-linkedin"></i></a>
              <a href="profile.html"><i class='bx bxs-user bx-flip-horizontal bx-flashing' ></i></a>
            </div>
           <p> Copyright Â© 2024 Fuze, All Rights Reserved. </p>
          </div>
          </footer>
        <style>
/* Original Styles Remain Here... */
nav{
    padding: 0 80px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 80px;
    background-color: #101014;
}

nav a.logo{
    font-size: 33px;
    color: #0f2182;
    font-weight: 600;
    font-family: 'Protest Guerrilla', sans-serif;
}

nav .login button.signup{
    background-color: #304ffe;
    color: #fff;
    border-radius: 8px;
    padding: 8px 14px;
    border: none;
    cursor: pointer;
    font-size: 16px;
}
nav .login button.signup:hover {
    background-color: #203bd9;
}

  .content {
  display: grid;
  grid-template-columns: 75% 25%;
}

.left-content {
  padding: 30px 20px;
  color: #e5e5e5;
}

.containers {
  display: flex;
  align-items: center;
  padding: 0 0 12px;
  overflow-x: auto;
  cursor: grab;
}

.artists h1 {
  margin-bottom: 24px;
}

.artist-container {
  column-gap: 20px;
}

.artist {
  display: grid;
  grid-auto-flow: dense;
  align-items: center;
  grid-template-rows: 8fr 2fr;
  user-select: none;
}
body{
  background-color: #000;
}

.artist img {
  object-fit: cover;
  border-radius: 50%;
  border: 2px solid rgba(169, 150, 253, 0.5);
  width: 140px;
  aspect-ratio: 1/1;
  margin-bottom: 8px;
  box-shadow: rgba(221, 221, 221, 0.3) 0px 6px 18px -3px,
    rgba(221, 221, 221, 0.2) 0px -3px 0px inset;
  transition: all 0.2s;
}

.artist img:hover {
  border: 4px solid rgba(169, 150, 253, 0.6);
}

.artist p {
  font-size: clamp(0.9rem, 3vw, 1rem);
  font-weight: 500;
  text-align: center;
}

.albums h1 {
  margin: 60px 0 14px;
}

.album-container {
  column-gap: 24px;
}

.album {
  display: grid;
  grid-auto-flow: dense;
  grid-template-rows: 5fr 2fr;
  user-select: none;
}

.album-frame {
  position: relative;
  width: 180px;
  aspect-ratio: 1/1;
  border: 2px solid rgba(169, 150, 253, 0.5);
  border-radius: 10px;
  box-shadow: rgba(221, 221, 221, 0.3) 0px 8px 18px -3px,
    rgba(221, 221, 221, 0.2) 0px -3px 0px inset;
  margin-bottom: 15px;
  overflow: hidden;
}

.album-frame img {
  position: absolute;
  inset: 0;
  height: 100%;
  object-fit: cover;
  transition: transform 0.8s;
}

.album-frame img:hover {
  transform: rotate(3deg) scale(1.2);
}

.album h2 {
  font-size: clamp(0.9rem, 4vw, 1.1rem);
  font-weight: 500;
  line-height: 1.3;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}

.album p {
  font-size: clamp(0.9rem, 4vw, 1rem);
  opacity: 0.5;
}

/* Containers Scrollbar Style */
.artist-container::-webkit-scrollbar,
.album-container::-webkit-scrollbar {
  height: 10px;
}
.artist-container::-webkit-scrollbar-track,
.album-container::-webkit-scrollbar-track {
  box-shadow: inset 0 0 0.3rem rgb(79, 78, 78);
  border-radius: 40px;
}
.artist-container::-webkit-scrollbar-thumb,
.album-container::-webkit-scrollbar-thumb {
  box-shadow: inset 0 0 0.5rem rgb(116, 116, 116);
  background-color: rgba(25, 43, 206, 0.2);
  outline: none;
  border-radius: 40px;
}

/* =========== NEW STYLES FOR HISTORY AND VOLUME =========== */
.listen-history {
    margin-top: 60px;
}
.listen-history h1 {
    margin-bottom: 24px;
}
#history-list {
    list-style: none;
    padding: 0;
    max-height: 250px;
    overflow-y: auto;
}
#history-list li {
    padding: 8px 10px;
    border-bottom: 1px solid #333;
    font-size: 0.9rem;
    opacity: 0.8;
}
#history-list li:last-child {
    border-bottom: none;
}
.history-placeholder {
    opacity: 0.5;
    font-style: italic;
}
.volume-control {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 80%;
    gap: 10px;
    margin-top: 15px;
}
#volume-slider {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 5px;
    background: rgba(200, 187, 255, 0.6);
    border-radius: 4px;
    cursor: pointer;
}
#volume-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    background: rgb(77, 58, 162);
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: 3px solid rgb(234, 229, 255);
}
/* ======================================================== */

footer{
  background-color: #000;
  color: #fff;
  padding: 100px 80px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
footer h3{ font-size: 48px; }
footer .right{
  width: 80%;
  display: flex;
  flex-direction: column;
  align-items:flex-end ;
  gap: 26px;
}
footer .right .links{ display: flex; gap: 30px; }

  .music-player {
  height: auto; /* Changed from fixed height */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: #fff;
  background: rgba(188, 184, 198, 0.2);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: inset 2px -2px 6px rgba(214, 214, 214, 0.2),
    inset -3px 3px 3px rgba(255, 255, 255, 0.3);
  border-radius: 16px;
  padding: 30px 20px;
  margin-top: 20px;
}
.album-cover { position: relative; }
.album-cover img {
  border-radius: 50%;
  border: 2px solid rgba(222, 215, 255, 0.9);
  max-width: 120px;
  aspect-ratio: 1/1;
  object-fit: cover;
  box-shadow: 0 10px 60px rgba(200, 187, 255, 01.75rem);
  transition: transform 0.5s ease-out;
  pointer-events: none;
  user-select: none;
}
.point {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 16px;
  background-color: rgba(17, 6, 58, 0.7);
  border: 2px solid rgba(222, 215, 255, 0.9);
  aspect-ratio: 1/1;
  border-radius: 50%;
  z-index: 2;
}
.music-player h2 {
  font-size: 1.2rem;
  font-weight: 500;
  margin: 16px 0 2px;
}
.music-player p {
  font-size: 1rem;
  font-weight: 300;
  margin-bottom: 26px;
  opacity: 0.8;
}
#progress {
  appearance: none;
  -webkit-appearance: none;
  width: 100%;
  height: 6px;
  background: rgba(200, 187, 255, 0.6);
  border-radius: 4px;
  margin-bottom: 16px;
  cursor: pointer;
}
#progress::-webkit-slider-thumb {
  appearance: none;
  -webkit-appearance: none;
  background: rgb(77, 58, 162);
  width: 20px;
  aspect-ratio: 1/1;
  border-radius: 50%;
  border: 4px solid rgb(234, 229, 255);
  box-shadow: 0 6px 10px rgba(200, 187, 255, 0.4);
}
.controls {
  display: flex;
  justify-content: center;
  align-items: center;
}
.controls button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  aspect-ratio: 1/1;
  margin: 20px;
  background: rgba(200, 187, 255, 0.6);
  border-radius: 50%;
  border: 0;
  outline: 0;
  color: #fff;
  font-size: 1.1rem;
  box-shadow: 0 4px 8px rgba(200, 187, 255, 0.3);
  cursor: pointer;
  transition: all 0.3s linear;
}
.controls button:is(:hover, :focus-visible) { transform: scale(0.96); }
.controls button:nth-child(2) { transform: scale(1.3); }
.controls button:nth-child(2):is(:hover, :focus-visible) { transform: scale(1.25); }

/* Other media queries remain the same... */

</style>


<script>
    // Draggable containers script (unchanged)
    const containers = document.querySelectorAll(".containers");
    containers.forEach((container) => {
    let isDragging = false;
    let startX;
    let scrollLeft;
    container.addEventListener("mousedown", (e) => {
        isDragging = true;
        startX = e.pageX - container.offsetLeft;
        scrollLeft = container.scrollLeft;
    });
    container.addEventListener("mousemove", (e) => {
        if (!isDragging) return;
        e.preventDefault();
        const x = e.pageX - container.offsetLeft;
        const step = (x - startX) * 0.6;
        container.scrollLeft = scrollLeft - step;
    });
    container.addEventListener("mouseup", () => { isDragging = false; });
    container.addEventListener("mouseleave", () => { isDragging = false; });
    });


    // =========== MUSIC PLAYER SCRIPT (MODIFIED) ===========
    const progress = document.getElementById("progress");
    const song = document.getElementById("song");
    const controlIcon = document.getElementById("controlIcon");
    const playPauseButton = document.querySelector(".play-pause-btn");
    const forwardButton = document.querySelector(".controls button.forward");
    const backwardButton = document.querySelector(".controls button.backward");
    const rotatingImage = document.getElementById("rotatingImage");
    const songName = document.querySelector(".music-player h2");
    const artistName = document.querySelector(".music-player p");

    const volumeSlider = document.getElementById("volume-slider");
    const historyList = document.getElementById("history-list");

    let rotating = false;
    let currentRotation = 0;
    let rotationInterval;

    const songs = [
        { title: "Raat Kali Ek Khwab Mein", name: "RD Burman", source: "C:\Users\akash\OneDrive\Desktop\Music page\Raat Kali Ek Khwab Mein.mp3", cover: "https://i.ytimg.com/vi/A3r6sOFtUUc/maxresdefault.jpg" },
        { title: "Slow Motion Angrezi", name: "Shankar Mahadevan & Sukhwinder Singh", source: "movies html/ass/aud/slow motion ang.mp3", cover: "https://c.saavncdn.com/575/Bhaag-Milkha-Bhaag-Hindi-2013-20190607111645-500x500.jpg" },
        { title: "Senorita", name: "Farhan Akhtar, Hrithik Roshan, Abhay Deol", source: "movies html/ass/aud/senorita.mp3", cover: "https://c.saavncdn.com/787/Zindagi-Na-Milegi-Dobara-2011-500x500.jpg" },
        { title: "Ghar More Pardesiya", name: "Shreya & Vaishali", source: "movies html/ass/aud/fhar mora.mp3", cover: "https://m.media-amazon.com/images/M/MV5BMTZhMjYyNzEtMTAxMi00NTg3LThmMWUtOGEwYTgxODc2MTY0XkEyXkFqcGdeQXVyOTc1MDE5NzI@._V1_.jpg" },
        { title: "Bulleya", name: "Papon", source: "movies html/ass/aud/bulleya.mp3", cover: "https://img.wynk.in/unsafe/200x200/filters:no_upscale():strip_exif():format(jpg)/http://s3-ap-south-1.amazonaws.com/wynk-music-cms/music/Soulful%20Melodies%20-%20Flute%20Version%20Instrumental.jpg" },
        { title: "Bhaag D.K Bose", name: "Ram Sampath", source: "movies html/ass/aud/Bhaag D.K. Bose.mp3", cover: "create/Bhaag-DK.jpg" },
        { title: "Control", name: "Unknown Brain x Rival", source: "https://github.com/ecemgo/mini-samples-great-tricks/raw/main/song-list/Unknown-BrainxRival-Control.mp3", cover: "https://github.com/ecemgo/mini-samples-great-tricks/assets/13468728/7bd23b84-d9b0-4604-a7e3-872157a37b61" },
        { title: "What's The Problem?", name: "OSKI", source: "https://github.com/ecemgo/mini-samples-great-tricks/raw/main/song-list/OSKI-Whats-The-Problem.mp3", cover: "https://github.com/ecemgo/mini-samples-great-tricks/assets/13468728/810d1ddc-1168-4990-8d43-a0ffee21fb8c" }
    ];

    let currentSongIndex = 0;
    let listenHistory = [];
    let recentIndices = []; // NEW: Array to track the indices of the last 3 songs

    // NEW: Function to get the next random song index, avoiding recent ones
    function getNextRandomIndex() {
        // If you have 3 or fewer songs, this logic can't work, so we fall back
        if (songs.length <= 3) {
            let nextIndex;
            do {
                nextIndex = Math.floor(Math.random() * songs.length);
            } while (nextIndex === currentSongIndex);
            return nextIndex;
        }

        // Keep picking a random song until it's not one of the recent ones
        let nextIndex;
        do {
            nextIndex = Math.floor(Math.random() * songs.length);
        } while (recentIndices.includes(nextIndex)); // The key change is here!
        return nextIndex;
    }

    function startRotation() {
        if (!rotating) {
            rotating = true;
            rotationInterval = setInterval(rotateImage, 50);
        }
    }

    function pauseRotation() {
        clearInterval(rotationInterval);
        rotating = false;
    }

    function rotateImage() {
        currentRotation += 1;
        rotatingImage.style.transform = `rotate(${currentRotation}deg)`;
    }

    function updateHistoryDisplay() {
        historyList.innerHTML = '';
        if (listenHistory.length === 0) {
            historyList.innerHTML = '<li class="history-placeholder">Your listened songs will appear here.</li>';
            return;
        }
        const uniqueHistory = [...new Map(listenHistory.map(item => [item['title'], item])).values()];
        uniqueHistory.slice(0, 10).forEach(songItem => {
            const li = document.createElement('li');
            li.textContent = `${songItem.title} - ${songItem.name}`;
            historyList.appendChild(li);
        });
    }

    function updateSongInfo() {
        const currentSong = songs[currentSongIndex];
        songName.textContent = currentSong.title;
        artistName.textContent = currentSong.name;
        song.src = currentSong.source;
        rotatingImage.src = currentSong.cover;

        listenHistory.unshift(currentSong);
        updateHistoryDisplay();

        // NEW: Update the recent indices tracker
        recentIndices.unshift(currentSongIndex); // Add the new index to the front
        if (recentIndices.length > 3) { // Keep the list at a max size of 3
            recentIndices.pop(); // Remove the oldest song index
        }

        song.addEventListener("loadeddata", function () {});
    }

    song.addEventListener("loadedmetadata", function () {
        progress.max = song.duration;
        progress.value = song.currentTime;
    });

    // MODIFIED: Use the new smart random function when a song ends
    song.addEventListener("ended", function () {
        currentSongIndex = getNextRandomIndex();
        updateSongInfo();
        playPause();
    });

    song.addEventListener("timeupdate", function () {
        if (!song.paused) {
            progress.value = song.currentTime;
        }
    });

    function playPause() {
        if (song.paused) {
            song.play();
            controlIcon.classList.add("fa-pause");
            controlIcon.classList.remove("fa-play");
            startRotation();
        } else {
            song.pause();
            controlIcon.classList.remove("fa-pause");
            controlIcon.classList.add("fa-play");
            pauseRotation();
        }
    }

    playPauseButton.addEventListener("click", playPause);

    progress.addEventListener("input", function () {
        song.currentTime = progress.value;
    });

    progress.addEventListener("change", function () {
        song.play();
        controlIcon.classList.add("fa-pause");
        controlIcon.classList.remove("fa-play");
        startRotation();
    });

    // MODIFIED: Use the new smart random function for the forward button
    forwardButton.addEventListener("click", function () {
        currentSongIndex = getNextRandomIndex();
        updateSongInfo();
        playPause();
    });

    backwardButton.addEventListener("click", function () {
        currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length;
        updateSongInfo();
        playPause();
    });

    volumeSlider.addEventListener("input", function() {
        song.volume = volumeSlider.value;
    });

    // Initial setup
    updateSongInfo();

</script>
      </body>
    
</body>
</html>